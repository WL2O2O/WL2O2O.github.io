name: Deploy # workflow name
on:
  [push] # è§¦å‘äº‹ä»¶â€‹
jobs:
  build: # job1 id
    runs-on: ubuntu-latest # è¿è¡Œç¯å¢ƒä¸ºæœ€æ–°ç‰ˆ Ubuntu
    name: A job to deploy blog.
    steps:
      - name: Checkout # step1 è·å–æºç 
        uses: actions/checkout@v1 # ä½¿ç”¨ actions/checkout@v1
        with: # æ¡ä»¶
          submodules: true # Checkout private submodules(themes or something else). å½“æœ‰å­æ¨¡å—æ—¶åˆ‡æ¢åˆ†æ”¯ï¼Ÿ
      # Caching dependencies to speed up workflows. (GitHub will remove any cache entries that have not been accessed in over 7 days.) ç¼“å­˜å‹ç¼© node_modulesï¼Œä¸ç”¨æ¯æ¬¡ä¸‹è½½ï¼Œä½¿ç”¨æ—¶è§£å‹ï¼Œå¯ä»¥åŠ å¿«å·¥ä½œæµçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œè¶…è¿‡ 7 å¤©æ²¡æœ‰ä½¿ç”¨å°†åˆ é™¤å‹ç¼©åŒ…ã€‚
      - name: Cache node modules # step2
        uses: actions/cache@v1
        id: cache
        with:
          path: node_modules
          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
          restore-keys: |
            ${{ runner.os }}-node-
      - name: Install Dependencies # step3 name
        if: steps.cache.outputs.cache-hit != 'true' # å¦‚æœå˜é‡ cache-hit ä¸ç­‰äº true
        run: |
          npm install # å®‰è£… node modules ç›¸å…³ä¾èµ–
          npm run build
      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@releases/v3
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          BRANCH: master # The branch the action should deploy to.
          FOLDER: public # The folder the action should deploy.

